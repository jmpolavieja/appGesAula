<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/login"></ion-back-button>
    </ion-buttons>
    <ion-title>Incidencia Detail</ion-title>
    <ion-img slot="end" src="./assets/logoGesAulamin.png"></ion-img>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-card>
    <ion-card-header class="ion-text-center">
      <ion-card-title>{{ incidencia?.idEquipo  }}</ion-card-title>
      <ion-card-subtitle>
        Creada por: {{ incidencia?.creadaPor}} - {{ incidencia?.fechaInicio}}
      </ion-card-subtitle>
    </ion-card-header>
    <ion-card-content>
      <form [formGroup]="incidForm">
        <ion-item>
          <ion-label position="floating">Desripción Incidencia:</ion-label>
          <ion-textarea [readonly]="!nueva" formControlName="descripcion" class="ion-text-wrap"></ion-textarea>

        </ion-item>
        <ion-label color="danger" *ngIf="incidForm.controls.descripcion.errors && nueva">* La descripción debe estar completa.</ion-label>
        <ion-item color="light">
          <ion-label position="stacked">Actuación:</ion-label>
          <ion-textarea formControlName="actuacion" [readonly]="nueva" ></ion-textarea>
        </ion-item>
        <p class="ion-text-center" *ngIf="!nueva">
          <ion-button (click)="finalizar()" [disabled]="bloquearF" expand="block">Finalizar</ion-button>
          <ion-button (click)="recogido()" [disabled]="bloquearR" expand="block">Recogido</ion-button>
        </p>
        <p class="ion-text-center" *ngIf="nueva">
          <ion-button (click)="enviar()" expand="block"
                      class="ion-color-success" [disabled]="!incidForm.valid && incidForm.dirty"
                      routerLink="/list-incidencias/{{idAula}}" routerDirection="back"
          >Enviar</ion-button>
        </p>
      </form>
    </ion-card-content>
  </ion-card>

</ion-content>
